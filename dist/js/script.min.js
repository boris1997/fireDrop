class Counter{constructor(e,t){this.buttons=e,this.amount=t}changeAmount=()=>{this.buttons[0].onclick=this.decreaseAmount,this.buttons[1].onclick=this.increaseAmount};increaseAmount=()=>{this.amount.innerText++,+this.amount.innerText>1&&this.buttons[0].classList.contains("counter__button--disabled")&&this.buttons[0].classList.remove("counter__button--disabled")};decreaseAmount=()=>{+this.amount.innerText>1&&this.amount.innerText--,1==+this.amount.innerText&&this.buttons[0].classList.add("counter__button--disabled")}}document.addEventListener("DOMContentLoaded",(()=>{const e=[...document.querySelectorAll(".counter__button")],t=document.querySelector(".counter__amount");new Counter(e,t).changeAmount()}));const footerYear=document.querySelector(".footer__year"),getedYear=()=>footerYear.textContent=`${(new Date).getFullYear()}`;console.log(footerYear.textContent=`${(new Date).getFullYear()}`);class Mail{constructor(e,t,s,i){this.btn=e,this.name=t,this.amount=s,this.phone=i}"сontactData"=()=>({name:{value:this.name.value,item:this.name,re:/^[a-zA-Zа-яА-Я0-9]{2,16}$/},phone:{value:this.phone.value,item:this.phone,re:/^[78]{1}[9]{1}[0-9]{9}$/},amount:{value:+this.amount.textContent,item:this.amount,re:/^[1-9]{0,3}$/}});contactDataArray=()=>Object.entries(this.сontactData());sendMail(e){this.btn.addEventListener("click",(e=>{this.mailValidation(e)})),document.addEventListener("keydown",(e=>{"Enter"===e.code&&this.mailValidation(e)}))}mailValidation(e){if(e.preventDefault(),this.validateData()){console.log("ok"),this.contactDataArray().map((e=>e[1].item.nextElementSibling.classList.contains("contact__invalid--show")&&e[1].item.nextElementSibling.classList.remove("contact__invalid--show")));let e={name:this.name.value,phone:this.phone.value,amount:+this.amount.textContent},t=new XMLHttpRequest;t.open("POST","/"),t.setRequestHeader("content-type","application/json"),t.onload=function(){console.log("oj"),alert("success"),"success"===t.responseText?alert("success"):console.log("some")},t.send(JSON.stringify(e))}}validateData=()=>this.contactDataArray().every(((e,t)=>!!e[1].re.test(e[1].value)||this.setAlert(e[1].item)))&&!0;setAlert(e){e.nextElementSibling.classList.add("contact__invalid--show"),setTimeout((()=>{e.nextElementSibling.classList.remove("contact__invalid--show")}),1e4)}}document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".contact__button"),t=document.getElementById("name"),s=document.querySelector(".counter__amount"),i=document.getElementById("phone");new Mail(e,t,s,i).sendMail()}));class Scroll{constructor(e,t,s,i,n,o,l){this.page=e,this.sections=t,this.menuItems=s,this.index=0,this.sidebar=n,this.hamburgerMenu=i,this.sidebarBody=o,this.sidebarOverlay=l}sidebarManipulation=()=>{console.log("ok"),window.onresize=()=>{window.innerWidth>1024&&this.sidebar.classList.contains("page__sidebar--active")&&this.removeSidebar()},this.sidebarOverlay.onclick=()=>this.removeSidebar(),this.hamburgerMenu.onclick=e=>this.toggleSidebar()};toggleSidebar=()=>{console.log("ok"),this.sidebar.classList.toggle("page__sidebar--active"),this.page.classList.toggle("page__noScroll"),this.sidebarBody.classList.toggle("sidebar__body--active"),this.sidebarOverlay.classList.toggle("overlay--show"),this.hamburgerMenu.classList.toggle("hamburger-menu__content--active")};removeSidebar=()=>{this.sidebar.classList.remove("page__sidebar--active"),this.page.classList.remove("page__noScroll"),this.sidebarBody.classList.remove("sidebar__body--active"),this.sidebarOverlay.classList.remove("overlay--show"),this.hamburgerMenu.classList.remove("hamburger-menu__content--active")};menuItemsInit=()=>{this.menuItems.map(((e,t)=>e.onclick=()=>{this.changeItemStyle(t)}))};changeItemStyle=e=>{console.log("object");document.querySelector(".menu__items--active").classList.remove("menu__items--active"),this.menuItems[e].classList.add("menu__items--active")};scrollEvent=()=>{window.addEventListener("scroll",(()=>{this.setActiveUrl()}))};setActiveUrl=()=>{this.sectionTop(1)-150<window.scrollY&&(this.setNewUrl(this.index+1),this.changeItemStyle(this.index+1),this.index++),this.sectionTop(0)-150>window.scrollY&&(this.setNewUrl(this.index-1),this.changeItemStyle(this.index-1),this.index--)};findActiveIndex=()=>{for(let e=0;e<this.sections.length;e++)this.sections[e].getBoundingClientRect().top+window.pageYOffset<window.scrollY&&(this.index=e,console.log(this.sections[e].getBoundingClientRect().top+window.pageYOffset),this.changeItemStyle(this.index),this.setNewUrl(this.index))};setNewUrl=e=>{console.log(e);const t=`#${this.sections[e].id}`,s=`#${this.sections[e].id}`;history.replaceState(t,"scroll",s)};sectionTop=e=>this.sections[this.index+e].getBoundingClientRect().top+window.pageYOffset}document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".page"),t=[...document.querySelectorAll(".section")],s=[...document.querySelectorAll(".menu__items")],i=document.querySelector(".page__sidebar"),n=document.querySelector(".sidebar__body"),o=document.querySelector(".overlay"),l=document.querySelector(".hamburger-menu__content"),a=new Scroll(e,t,s,l,i,n,o);a.findActiveIndex(),a.scrollEvent(),a.menuItemsInit(),a.sidebarManipulation()}));class Slider{constructor(e,t,s,i,n,o,l,a,r){this.arrow=e,this.content=t,this.galleryImg=s,this.sliderImg=i,this.main=n,this.page=o,this.closeBtn=l,this.sliderCarousel=a,this.btn=r}translateSlides=()=>{for(let e=1;e<content.length;e++)this.translate();window.addEventListener("resize",(()=>{this.translate()}))};translate=()=>{for(let e=1;e<content.length;e++)content[e].style.left=content[e].clientWidth*e+"px",console.log(e),console.log(content[e].clientWidth)};getToggleBtns=()=>{this.arrow[0].addEventListener("click",(()=>{this.left()})),this.arrow[1].addEventListener("click",(()=>{this.rigth()}))};initGalleryImg=()=>{this.galleryImg.map((e=>e.onclick=t=>this.showSlider(t,e)))};initSliderImg=()=>{this.sliderImg.map((e=>e.onclick=e=>this.hideSlider()))};initCloseBtn=()=>{this.closeBtn.onclick=e=>this.hideSlider()};showSlider=(e,t)=>{this.sliderCarousel.classList.add("modal--active"),this.page.classList.add("page--no-scroll"),this.getTransformation(t);document.querySelector(".slider__item--active").classList.remove("slider__item--active"),console.log(this.content[this.galleryImg.indexOf(t)]),this.content[this.galleryImg.indexOf(t)].classList.add("slider__item--active")};hideSlider=()=>{const e=document.querySelector(".modal--active");this.page.classList.remove("page--no-scroll"),e.classList.remove("modal--active")};showNeededSLide=()=>{this.content.forEach((e=>{content.indexOf(e)===toggleBtn.indexOf(this)&&(clearInterval(inter),main.style.transform="translate(-"+content.indexOf(e)+"00%)")})),toggleBtn.forEach((e=>{toggleBtn.indexOf(e)===toggleBtn.indexOf(this)?e.classList.add("active-toggle"):e.classList.remove("active-toggle")}))};rigth=()=>{const e=document.querySelector(".slider__item--active");e.nextElementSibling?(e.classList.remove("slider__item--active"),e.nextElementSibling.classList.add("slider__item--active"),this.main.style.transform+="translate(-100%)",console.log(e)):(e.classList.remove("slider__item--active"),this.content[0].classList.add("slider__item--active"),this.main.style.transform="translate(0)")};left=()=>{const e=document.querySelector(".slider__item--active");e.previousElementSibling?(e.classList.remove("slider__item--active"),e.previousElementSibling.classList.add("slider__item--active"),this.main.style.transform+="translate(100%)"):(e.classList.remove("slider__item--active"),this.main.lastElementChild.classList.add("slider__item--active"),this.main.style.transform="translate(-300%)"),console.log(e)};getTransformation=e=>{console.log(e),console.log(this.content.indexOf(e)),this.main.style.transform="translate(-"+this.galleryImg.indexOf(e)+"00%)"}}document.addEventListener("DOMContentLoaded",(()=>{const e=[...document.querySelectorAll(".slider__arrow")],t=[...document.querySelectorAll(".slider__item")],s=[...document.querySelectorAll(".slider__img")],i=[...document.querySelectorAll(".gallery__img")],n=document.querySelector(".page"),o=document.querySelector(".button__close"),l=document.querySelector(".slider"),a=document.querySelector(".slider__wrapper"),r=document.querySelectorAll(".btn"),c=new Slider(e,t,i,s,a,n,o,l,r);c.getToggleBtns(),c.initGalleryImg(),c.initSliderImg(),c.initCloseBtn()}));